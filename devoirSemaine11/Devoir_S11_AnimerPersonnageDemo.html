<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <title>Devoir semaine 11 - Deplacement et Animation d'un perso  </title>

    <style>
        canvas {
            border: 1px solid black;
            cursor: pointer;
            background: linear-gradient(to bottom, #222222,#eeeeee);
        }

    </style>
</head>


<body>
    <!-- CrÃ©er la balise canvas et modifier ensuite ses dimensions -->
    <canvas width="800" height="400"></canvas>

    <script>
const _0x4444=['images/arretGauche.png','vitesse','#f00f00','canvas','random','images/courseDroite.png','images/diamant','images/arretDroite.png','largeur','drawImage','ceil','fillText','\x2032px\x20Calibri','images/monstre.png','vitesseX','indexVignette','keyCode','keydown','addEventListener','height','.png','presserTouche','posX','vitesseY','sourceX','clearRect','textBaseline','images/courseGauche.png','hauteur','src','DIAMANTS\x20:\x20','textAlign','img','querySelector','getContext','fillStyle','width','posY','center','images/diamant1.png'];(function(_0x4b14b9,_0x4444ed){const _0x39165d=function(_0x5347c9){while(--_0x5347c9){_0x4b14b9['push'](_0x4b14b9['shift']());}};_0x39165d(++_0x4444ed);}(_0x4444,0x11e));const _0x3916=function(_0x4b14b9,_0x4444ed){_0x4b14b9=_0x4b14b9-0x0;let _0x39165d=_0x4444[_0x4b14b9];return _0x39165d;};const _0x5cad61=_0x3916;let leCanvas=document[_0x5cad61('0x1b')](_0x5cad61('0x25')),ctx=leCanvas[_0x5cad61('0x1c')]('2d'),perso={'img':new Image(),'posX':0xfa,'posY':leCanvas[_0x5cad61('0xd')]-0x64,'largeur':0x4c,'hauteur':0x64,'vitesse':0x4,'indexVignette':0x0,'nbVignette':0x6,'sourceX':0x0};perso['img'][_0x5cad61('0x17')]=_0x5cad61('0x22');let monstre={'img':new Image(),'posX':Math[_0x5cad61('0x4')](Math[_0x5cad61('0x26')]()*0x1f4),'posY':0x0,'vitesseX':0x5,'vitesseY':0x5,'largeur':0x82,'hauteur':0x82};monstre[_0x5cad61('0x1a')][_0x5cad61('0x17')]=_0x5cad61('0x7');let diamant={'img':new Image(),'posX':Math[_0x5cad61('0x4')](Math[_0x5cad61('0x26')]()*(leCanvas[_0x5cad61('0x1e')]-0x46)),'posY':leCanvas[_0x5cad61('0xd')]-0x2e,'largeur':0x19,'hauteur':0x32};diamant[_0x5cad61('0x1a')][_0x5cad61('0x17')]=_0x5cad61('0x21');let nombreDiammant=0x0,flecheGauche=![],flecheDroite=![],intervalIDActualiserJeu=setInterval(actualiserJeu,0x3e8/0x3c),intervalIDAnimationPerso=setInterval(animerperso,0x3e8/0x6);document[_0x5cad61('0xc')](_0x5cad61('0xb'),presserTouche),document[_0x5cad61('0xc')]('keyup',relacherTouche);function presserTouche(_0x5347c9){const _0x525783=_0x5cad61;console['log'](_0x525783('0xf'),_0x5347c9[_0x525783('0xa')]),_0x5347c9[_0x525783('0xa')]==0x27&&(flecheDroite=!![],flecheGauche=![]),_0x5347c9[_0x525783('0xa')]==0x25&&(flecheGauche=!![],flecheDroite=![]);}function relacherTouche(_0x5e4fa2){const _0xd31b8b=_0x5cad61;_0x5e4fa2[_0xd31b8b('0xa')]==0x27&&(flecheDroite=![],perso[_0xd31b8b('0x1a')]['src']=_0xd31b8b('0x1')),_0x5e4fa2['keyCode']==0x25&&(flecheGauche=![],perso[_0xd31b8b('0x1a')]['src']=_0xd31b8b('0x22'));}function detecterCollision(_0x1ae85b,_0x34e256){const _0x454254=_0x5cad61;let _0x300090=0x14;return _0x1ae85b[_0x454254('0x10')]+_0x300090<_0x34e256[_0x454254('0x10')]+_0x34e256[_0x454254('0x2')]&&_0x1ae85b[_0x454254('0x10')]+_0x1ae85b[_0x454254('0x2')]-_0x300090>_0x34e256[_0x454254('0x10')]&&_0x1ae85b[_0x454254('0x1f')]+_0x300090<_0x34e256[_0x454254('0x1f')]+_0x34e256[_0x454254('0x16')]&&_0x1ae85b['posY']+_0x1ae85b['hauteur']-_0x300090>_0x34e256[_0x454254('0x1f')]?!![]:![];}function actualiserJeu(){const _0x220bc0=_0x5cad61;ctx[_0x220bc0('0x13')](0x0,0x0,leCanvas[_0x220bc0('0x1e')],leCanvas[_0x220bc0('0xd')]),ctx[_0x220bc0('0x3')](diamant[_0x220bc0('0x1a')],diamant[_0x220bc0('0x10')],diamant[_0x220bc0('0x1f')]),deplacerPerso(),deplacerMonstre();let _0x4478f3=detecterCollision(perso,monstre);_0x4478f3==!![]&&clearInterval(intervalIDActualiserJeu);let _0x5428b0=detecterCollision(perso,diamant);_0x5428b0==!![]&&(diamant['posX']=Math[_0x220bc0('0x4')](Math[_0x220bc0('0x26')]()*(leCanvas[_0x220bc0('0x1e')]-0x46)),diamant[_0x220bc0('0x1a')][_0x220bc0('0x17')]=_0x220bc0('0x0')+Math[_0x220bc0('0x4')](Math['random']()*0x3)+_0x220bc0('0xe'),nombreDiammant+=0x1),afficherScore();}function deplacerPerso(){const _0x39ad68=_0x5cad61;flecheDroite&&(perso['posX']+=perso[_0x39ad68('0x23')],perso[_0x39ad68('0x1a')][_0x39ad68('0x17')]=_0x39ad68('0x27'));flecheGauche&&(perso[_0x39ad68('0x10')]-=perso[_0x39ad68('0x23')],perso[_0x39ad68('0x1a')][_0x39ad68('0x17')]=_0x39ad68('0x15'));perso[_0x39ad68('0x10')]<0x0&&(perso['posX']=0x0);let _0x58572c=leCanvas[_0x39ad68('0x1e')]-perso[_0x39ad68('0x2')];perso[_0x39ad68('0x10')]>_0x58572c&&(perso[_0x39ad68('0x10')]=_0x58572c),ctx[_0x39ad68('0x3')](perso[_0x39ad68('0x1a')],perso[_0x39ad68('0x12')],0x0,perso[_0x39ad68('0x2')],perso[_0x39ad68('0x16')],perso[_0x39ad68('0x10')],perso[_0x39ad68('0x1f')],perso[_0x39ad68('0x2')],perso['hauteur']);}function animerperso(){const _0x3b55ec=_0x5cad61;perso['sourceX']=perso[_0x3b55ec('0x9')]*perso[_0x3b55ec('0x2')],perso['indexVignette']+=0x1,perso['indexVignette']==perso['nbVignette']&&(perso['indexVignette']=0x0);}function deplacerMonstre(){const _0x2c36cc=_0x5cad61;monstre[_0x2c36cc('0x10')]+=monstre['vitesseX'],monstre['posY']+=monstre[_0x2c36cc('0x11')];let _0x523c98=leCanvas[_0x2c36cc('0x1e')]-monstre[_0x2c36cc('0x2')];(monstre['posX']<0x0||monstre['posX']>_0x523c98)&&(monstre[_0x2c36cc('0x8')]*=-0x1);let _0x3c1c05=leCanvas[_0x2c36cc('0xd')]-monstre[_0x2c36cc('0x16')];(monstre[_0x2c36cc('0x1f')]<0x0||monstre['posY']>_0x3c1c05)&&(monstre[_0x2c36cc('0x11')]*=-0x1),ctx[_0x2c36cc('0x3')](monstre[_0x2c36cc('0x1a')],monstre[_0x2c36cc('0x10')],monstre[_0x2c36cc('0x1f')]);}function afficherScore(){const _0x5349d0=_0x5cad61;ctx['font']=_0x5349d0('0x6'),ctx[_0x5349d0('0x14')]='top',ctx[_0x5349d0('0x1d')]=_0x5349d0('0x24'),ctx[_0x5349d0('0x19')]=_0x5349d0('0x20'),ctx[_0x5349d0('0x5')](_0x5349d0('0x18')+nombreDiammant,leCanvas[_0x5349d0('0x1e')]/0x2,0xa);}
    </script>

</body>

</html>
